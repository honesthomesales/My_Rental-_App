(()=>{var e={};e.id=204,e.ids=[204],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},514:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>o}),s(3709),s(7195),s(1025);var a=s(3282),n=s(5736),r=s(3906),l=s.n(r),i=s(6880),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let o=["",{children:["payments",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3709)),"C:\\Projects\\Rental_App\\apps\\web\\app\\payments\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7195)),"C:\\Projects\\Rental_App\\apps\\web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,1025)),"C:\\Projects\\Rental_App\\apps\\web\\app\\not-found.tsx"]}],d=["C:\\Projects\\Rental_App\\apps\\web\\app\\payments\\new\\page.tsx"],p="/payments/new/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/payments/new/page",pathname:"/payments/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9021:(e,t,s)=>{Promise.resolve().then(s.bind(s,6791))},6791:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(3227),n=s(3677),r=s(1043),l=s(9342),i=s(2837),c=s(2450),o=s(5579),d=s(582),p=s(7587),m=s(5169),u=s(4155);let x=c.Ry({transaction_type:c.Km(["rent_payment","loan_payment","property_sale","property_purchase","expense","income"]),amount:c.Rx().positive("Amount must be positive"),description:c.Z_().min(1,"Description is required"),transaction_date:c.Z_().min(1,"Transaction date is required"),payment_status:c.Km(["pending","completed","failed","cancelled"]).default("completed"),property_id:c.Z_().optional(),tenant_id:c.Z_().optional(),loan_id:c.Z_().optional(),bank_account_id:c.Z_().optional(),reference_number:c.Z_().optional(),notes:c.Z_().optional()});function b({transaction:e,onSuccess:t,onCancel:s}){let[r,c]=(0,n.useState)(!1),[b,y]=(0,n.useState)([]),[h,_]=(0,n.useState)([]),[j,v]=(0,n.useState)([]),{register:f,handleSubmit:g,watch:N,formState:{errors:P},reset:w}=(0,l.cI)({resolver:(0,i.F)(x),defaultValues:e?{transaction_type:e.transaction_type,amount:e.amount,description:e.description||"",transaction_date:e.transaction_date,payment_status:e.payment_status,property_id:e.property_id||"",tenant_id:e.tenant_id||"",loan_id:e.loan_id||"",bank_account_id:e.bank_account_id||"",reference_number:e.reference_number||"",notes:e.notes||""}:{transaction_type:"rent_payment",payment_status:"completed",transaction_date:new Date().toISOString().split("T")[0]}});N("property_id"),N("transaction_type");let q=async s=>{try{if(c(!0),e){let a={id:e.id,...s},n=await o.TransactionsService.update(e.id,a);n.success&&n.data?(u.ZP.success("Transaction updated successfully"),t?.(n.data)):u.ZP.error(n.error||"Failed to update transaction")}else{let e=await o.TransactionsService.create(s);e.success&&e.data?(u.ZP.success("Transaction created successfully"),w(),t?.(e.data)):u.ZP.error(e.error||"Failed to create transaction")}}catch(e){u.ZP.error("An error occurred")}finally{c(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(d.Z,{className:"w-6 h-6 text-primary-600 mr-3"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Transaction":"Add New Transaction"})]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(p.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:g(q),className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Transaction Details"})}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Type *"}),a.jsx("select",{...f("transaction_type"),className:"input",children:[{value:"rent_payment",label:"Rent Payment"},{value:"loan_payment",label:"Loan Payment"},{value:"expense",label:"Expense"},{value:"income",label:"Income"},{value:"property_sale",label:"Property Sale"},{value:"property_purchase",label:"Property Purchase"}].map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))}),P.transaction_type&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:P.transaction_type.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount *"}),a.jsx("input",{...f("amount",{valueAsNumber:!0}),type:"number",step:"0.01",className:"input",placeholder:"0.00"}),P.amount&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:P.amount.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Date *"}),a.jsx("input",{...f("transaction_date"),type:"date",className:"input"}),P.transaction_date&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:P.transaction_date.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Status *"}),a.jsx("select",{...f("payment_status"),className:"input",children:[{value:"completed",label:"Completed"},{value:"pending",label:"Pending"},{value:"failed",label:"Failed"},{value:"cancelled",label:"Cancelled"}].map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))}),P.payment_status&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:P.payment_status.message})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),a.jsx("input",{...f("description"),className:"input",placeholder:"Enter transaction description"}),P.description&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:P.description.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference Number"}),a.jsx("input",{...f("reference_number"),className:"input",placeholder:"e.g., Check #1234"})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 mt-6",children:"Related Information"})}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),(0,a.jsxs)("select",{...f("property_id"),className:"input",children:[a.jsx("option",{value:"",children:"Select Property (Optional)"}),b.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," - ",e.address]},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tenant"}),(0,a.jsxs)("select",{...f("tenant_id"),className:"input",children:[a.jsx("option",{value:"",children:"Select Tenant (Optional)"}),j.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),a.jsx("textarea",{...f("notes"),rows:3,className:"input",placeholder:"Additional notes about this transaction"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:s,className:"btn btn-secondary",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",disabled:r,className:"btn btn-primary",children:[r?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(m.Z,{className:"w-4 h-4 mr-2"}),e?"Update Transaction":"Create Transaction"]})]})]})]})})}function y(){let e=(0,r.useRouter)(),[t,s]=(0,n.useState)(!0);return t?a.jsx(b,{onSuccess:t=>{u.ZP.success("Transaction created successfully!"),e.push("/payments")},onCancel:()=>{e.push("/payments")}}):null}},3709:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(3189).createProxy)(String.raw`C:\Projects\Rental_App\apps\web\app\payments\new\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[784,891,833,152],()=>s(514));module.exports=a})();