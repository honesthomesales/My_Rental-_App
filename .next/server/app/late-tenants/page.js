(()=>{var e={};e.id=222,e.ids=[222],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},9712:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>o}),s(5070),s(7195),s(1025);var a=s(3282),r=s(5736),n=s(3906),l=s.n(n),i=s(6880),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let o=["",{children:["late-tenants",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5070)),"C:\\Projects\\Rental_App\\apps\\web\\app\\late-tenants\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7195)),"C:\\Projects\\Rental_App\\apps\\web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,1025)),"C:\\Projects\\Rental_App\\apps\\web\\app\\not-found.tsx"]}],c=["C:\\Projects\\Rental_App\\apps\\web\\app\\late-tenants\\page.tsx"],x="/late-tenants/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/late-tenants/page",pathname:"/late-tenants",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5515:(e,t,s)=>{Promise.resolve().then(s.bind(s,3977))},3977:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(3227),r=s(3677),n=s(5579),l=s(3540),i=s(7464),d=s(1692),o=s(1109);let c=(0,o.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var x=s(7587);let m=(0,o.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),h=(0,o.Z)("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);var p=s(4155),b=s(4052),u=s.n(b);function f({tenant:e}){let t=new Date,s=(()=>{let e=new Date(t);e.setDate(e.getDate()+1);let s=0,a=new Date(e);for(;s<5;)a.getDay()>=1&&5>=a.getDay()&&s++,a.setDate(a.getDate()+1);return a.setDate(a.getDate()-1),a})(),r=(e.total_due||0)+(e.total_late_fees||0),n=e=>e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f bg-white p-8 max-w-4xl mx-auto print:p-0",children:[(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f text-center mb-8 print:mb-6",children:[a.jsx("h1",{className:"jsx-b2a21a90a99b3b8f text-2xl font-bold text-gray-900 mb-2 print:text-xl",children:"5-Day Notice to Vacate or Pay Rent"}),(0,a.jsxs)("p",{className:"jsx-b2a21a90a99b3b8f text-gray-600",children:["Date: ",n(s)]})]}),(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f grid grid-cols-1 md:grid-cols-2 gap-8 mb-8 print:mb-6",children:[(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f",children:[a.jsx("h3",{className:"jsx-b2a21a90a99b3b8f font-semibold text-gray-900 mb-2",children:"To:"}),(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:[(0,a.jsxs)("p",{className:"jsx-b2a21a90a99b3b8f font-medium",children:[e.first_name," ",e.last_name]}),e.properties&&a.jsx("p",{className:"jsx-b2a21a90a99b3b8f",children:e.properties.address})]})]}),(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f",children:[a.jsx("h3",{className:"jsx-b2a21a90a99b3b8f font-semibold text-gray-900 mb-2",children:"From:"}),(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:[a.jsx("p",{className:"jsx-b2a21a90a99b3b8f font-medium",children:"Honest Home Sales, LLC - Member: Billy Rochester"}),a.jsx("p",{className:"jsx-b2a21a90a99b3b8f",children:"PO Box 705"}),a.jsx("p",{className:"jsx-b2a21a90a99b3b8f",children:"Cowpens SC 29330"})]})]})]}),(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f border-2 border-gray-300 p-6 mb-8 print:mb-6",children:[a.jsx("h2",{className:"jsx-b2a21a90a99b3b8f text-xl font-bold text-center text-gray-900 mb-6 print:mb-4",children:"NOTICE TO VACATE OR PAY RENT"}),a.jsx("p",{className:"jsx-b2a21a90a99b3b8f text-gray-700 mb-4",children:"This notice serves as formal notification that you are past due on your rent for the premises located at:"}),a.jsx("div",{className:"jsx-b2a21a90a99b3b8f bg-gray-50 p-4 mb-6 print:mb-4 border-l-4 border-red-500",children:a.jsx("p",{className:"jsx-b2a21a90a99b3b8f font-medium text-gray-900",children:e.properties?e.properties.address:"Property address not available"})}),a.jsx("p",{className:"jsx-b2a21a90a99b3b8f text-gray-700 mb-4",children:"As of the date of this notice, you owe the following amounts:"}),a.jsx("div",{className:"jsx-b2a21a90a99b3b8f bg-red-50 p-4 mb-6 print:mb-4 border-l-4 border-red-500",children:(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f space-y-2",children:[(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f flex justify-between",children:[a.jsx("span",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:"Past Due Rent:"}),(0,a.jsxs)("span",{className:"jsx-b2a21a90a99b3b8f font-medium",children:["$",(e.total_due||0).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f flex justify-between",children:[a.jsx("span",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:"Late Fees:"}),(0,a.jsxs)("span",{className:"jsx-b2a21a90a99b3b8f font-medium",children:["$",(e.total_late_fees||e.late_fees_owed||0).toLocaleString()]})]}),a.jsx("div",{className:"jsx-b2a21a90a99b3b8f border-t border-red-200 pt-2 mt-2",children:(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f flex justify-between",children:[a.jsx("span",{className:"jsx-b2a21a90a99b3b8f text-gray-900 font-semibold",children:"Total Amount Due:"}),(0,a.jsxs)("span",{className:"jsx-b2a21a90a99b3b8f text-2xl font-bold text-red-600 print:text-xl",children:["$",r.toLocaleString()]})]})})]})}),a.jsx("p",{className:"jsx-b2a21a90a99b3b8f text-gray-700 mb-4",children:"You are hereby given 5 days from the date of this notice to either:"}),(0,a.jsxs)("ul",{className:"jsx-b2a21a90a99b3b8f list-none space-y-2 mb-6 print:mb-4",children:[(0,a.jsxs)("li",{className:"jsx-b2a21a90a99b3b8f flex items-start",children:[a.jsx("span",{className:"jsx-b2a21a90a99b3b8f text-green-600 mr-2 mt-1",children:"✅"}),a.jsx("span",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:"Pay the full amount of rent owed immediately to bring your account current; or"})]}),(0,a.jsxs)("li",{className:"jsx-b2a21a90a99b3b8f flex items-start",children:[a.jsx("span",{className:"jsx-b2a21a90a99b3b8f text-green-600 mr-2 mt-1",children:"✅"}),a.jsx("span",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:"Vacate and surrender the premises to the landlord in accordance with the conditions below."})]})]}),a.jsx("p",{className:"jsx-b2a21a90a99b3b8f text-gray-700 mb-4",children:"If you choose to voluntarily vacate the premises within this 5-day period, leave the property in pristine condition, and deliver possession to the landlord without causing additional damage or incurring further rent, then:"}),(0,a.jsxs)("ul",{className:"jsx-b2a21a90a99b3b8f list-disc list-inside space-y-2 mb-6 print:mb-4 text-gray-700",children:[a.jsx("li",{className:"jsx-b2a21a90a99b3b8f",children:"All late fees will be waived."}),a.jsx("li",{className:"jsx-b2a21a90a99b3b8f",children:"You will not be pursued for a judgment for unpaid rent."})]}),a.jsx("p",{className:"jsx-b2a21a90a99b3b8f text-gray-700 mb-4",children:"However, if you fail to pay the rent in full, and do not vacate the premises within 5 days of this notice, legal action may be filed to recover possession of the property, unpaid rent, and any other damages permitted by law."}),(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f bg-yellow-50 p-4 mb-6 print:mb-4 border-l-4 border-yellow-500",children:[a.jsx("h4",{className:"jsx-b2a21a90a99b3b8f font-semibold text-gray-900 mb-2",children:"Important:"}),(0,a.jsxs)("ul",{className:"jsx-b2a21a90a99b3b8f list-disc list-inside space-y-1 text-gray-700",children:[a.jsx("li",{className:"jsx-b2a21a90a99b3b8f",children:"If you pay the full past due rent before the expiration of this notice, your tenancy will continue, and no further action will be taken at this time."}),a.jsx("li",{className:"jsx-b2a21a90a99b3b8f",children:"If you vacate voluntarily and leave the premises in pristine condition as determined by the landlord, you will be released from further liability for unpaid rent or late fees."})]})]})]}),(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f grid grid-cols-1 md:grid-cols-2 gap-8 print:gap-6",children:[(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f",children:[a.jsx("h3",{className:"jsx-b2a21a90a99b3b8f font-semibold text-gray-900 mb-2",children:"Landlord/Property Manager Signature:"}),a.jsx("div",{className:"jsx-b2a21a90a99b3b8f border-b-2 border-gray-400 h-12 mb-2 print:h-8"}),a.jsx("p",{className:"jsx-b2a21a90a99b3b8f text-sm text-gray-600",children:"(Upload signature here)"})]}),(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f",children:[a.jsx("h3",{className:"jsx-b2a21a90a99b3b8f font-semibold text-gray-900 mb-2",children:"Printed Name:"}),a.jsx("p",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:"Billy Rochester"}),a.jsx("p",{className:"jsx-b2a21a90a99b3b8f text-sm text-gray-600",children:"Member: Honest Home Sales, LLC"})]})]}),(0,a.jsxs)("div",{className:"jsx-b2a21a90a99b3b8f mt-8 print:mt-6",children:[a.jsx("h3",{className:"jsx-b2a21a90a99b3b8f font-semibold text-gray-900 mb-2",children:"Date:"}),a.jsx("p",{className:"jsx-b2a21a90a99b3b8f text-gray-700",children:n(t)})]}),a.jsx(u(),{id:"b2a21a90a99b3b8f",children:"@media print{.print\\\\.jsx-b2a21a90a99b3b8f:mb-6{margin-bottom:1.5rem!important}.print\\\\.jsx-b2a21a90a99b3b8f:mb-4{margin-bottom:1rem!important}.print\\\\.jsx-b2a21a90a99b3b8f:text-xl{font-size:1.25rem!important}.print\\\\.jsx-b2a21a90a99b3b8f:p-0{padding:0!important}.print\\\\.jsx-b2a21a90a99b3b8f:gap-6{gap:1.5rem!important}.print\\\\.jsx-b2a21a90a99b3b8f:mt-6{margin-top:1.5rem!important}.print\\\\.jsx-b2a21a90a99b3b8f:h-8{height:2rem!important}}"})]})}function g(){let[e,t]=(0,r.useState)([]),[s,o]=(0,r.useState)(!0),[b,u]=(0,r.useState)(null),[g,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)(null),[v,_]=(0,r.useState)(!1),[w,S]=(0,r.useState)([]),[P,R]=(0,r.useState)(0),L=async()=>{try{o(!0);let e=await n.TenantsService.getLateTenants();e.success&&e.data?t(e.data):p.ZP.error("Failed to load late tenants")}catch(e){p.ZP.error("Error loading late tenants")}finally{o(!1)}},T=e=>e>5e3?"bg-red-50":e>2e3?"bg-orange-50":e>500?"bg-yellow-50":"bg-white",k=e=>e.leases&&e.leases.length>0?e.leases[0].rent||0:e.monthly_rent||0,C=e=>{if(e.leases&&e.leases.length>0){let t=e.leases[0].rent_cadence;if(t)switch(t.toLowerCase().trim()){case"weekly":return"weekly";case"bi-weekly":case"biweekly":case"bi_weekly":return"bi-weekly"}}return"monthly"},D=e=>{u(e),j(!0)},F=async e=>{try{console.log("View periods clicked for tenant:",e.id,e.first_name,e.last_name),console.log("Tenant data:",e),u(e);let t=await n.RentPeriodsService.getTenantRentPeriods(e.id);if(console.log("Rent periods response:",t),!n.supabase){console.error("Supabase client not available"),p.ZP.error("Database connection not available");return}let{data:s}=await n.supabase.from("RENT_payments").select("id, amount, payment_date, payment_type").eq("tenant_id",e.id).order("payment_date",{ascending:!1});if(console.log("Payments data:",s),t.success&&t.data&&t.data.length>0)console.log("Setting tenant periods:",t.data),console.log("Number of periods found:",t.data.length),S(t.data),_(!0),console.log("Modal should now be visible, showPeriodsModal:",!0);else{console.log("No rent periods found, attempting to generate them..."),p.ZP.success("Generating rent periods for this tenant...");try{let{data:t}=await n.supabase.from("RENT_leases").select("*").eq("tenant_id",e.id).order("lease_start_date",{ascending:!1}).limit(1);if(t&&t.length>0){let s=t[0],a=await n.RentPeriodsService.createRentPeriods(e,s);a.success&&a.data?(console.log("Successfully generated rent periods:",a.data),S(a.data),_(!0),p.ZP.success("Rent periods generated successfully")):(console.error("Failed to generate rent periods:",a.error),p.ZP.error("Failed to generate rent periods. Please run the generation script."),_(!0))}else console.log("No leases found for tenant"),p.ZP.error("No lease information found for this tenant. Please add a lease first."),_(!0)}catch(e){console.error("Error generating rent periods:",e),p.ZP.error("Error generating rent periods. Please run the generation script."),_(!0)}}}catch(e){console.error("Error loading rent periods:",e),p.ZP.error("Error loading rent periods")}},A=async(e,t)=>{try{(await n.RentPeriodsService.updateRentPeriod(e,{late_fee_applied:t,late_fee_waived:0===t})).success?(p.ZP.success("Late fee updated successfully"),N(null),R(0),await L()):p.ZP.error("Failed to update late fee")}catch(e){p.ZP.error("Error updating late fee")}};return s?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(console.log("LateTenantsPage render - showPeriodsModal:",v,"selectedTenantPeriods:",w),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Late Tenants"}),a.jsx("p",{className:"text-gray-600",children:"Tenants more than 5 days late on rent"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Late Tenants"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:e.length})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount Due"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["$",e.reduce((e,t)=>e+(t.total_due||0),0).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Late Fees"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:["$",e.reduce((e,t)=>e+(t.total_late_fees||0),0).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Avg Amount Due"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-yellow-600",children:["$",e.length>0?(e.reduce((e,t)=>e+(t.total_due||0),0)/e.length).toFixed(0):0]})]})]})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:0===e.length?a.jsx("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-content text-center py-12",children:[a.jsx(l.Z,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Late Tenants"}),a.jsx("p",{className:"text-gray-600",children:"All tenants are current on their rent payments."})]})}):(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("div",{className:"flex justify-between items-center",children:(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"card-title",children:"Late Tenants"}),a.jsx("p",{className:"card-description",children:"Manage late tenants and generate notices"})]})})}),a.jsx("div",{className:"card-content",children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Tenant"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Property"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Rent Cadence"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Rent Amount"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Late Periods"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Late Fees"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Total Due"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),a.jsx("tbody",{children:e.map(e=>{let t=e.total_due||0,s=k(e),r=C(e),n=e.late_periods||0,l=e.total_late_fees||0,o=T(t);return(0,a.jsxs)("tr",{className:`border-b border-gray-100 hover:bg-gray-100 ${o}`,children:[a.jsx("td",{className:"py-4 px-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),a.jsx("p",{className:"text-sm text-gray-500",children:e.phone})]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-gray-900",children:e.properties?.name||"No property"})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600 capitalize",children:r})}),(0,a.jsxs)("td",{className:"py-4 px-4 font-medium text-gray-900",children:["$",s.toLocaleString()]}),a.jsx("td",{className:"py-4 px-4 font-medium text-gray-900",children:n}),(0,a.jsxs)("td",{className:"py-4 px-4 font-medium text-gray-900",children:["$",l.toLocaleString()]}),(0,a.jsxs)("td",{className:"py-4 px-4 font-medium text-red-600",children:["$",t.toLocaleString()]}),a.jsx("td",{className:"py-4 px-4",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>F(e),className:"bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700 flex items-center",children:[a.jsx(i.Z,{className:"w-4 h-4 mr-2"}),"View Periods"]}),(0,a.jsxs)("button",{onClick:()=>D(e),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 flex items-center",children:[a.jsx(d.Z,{className:"w-4 h-4 mr-2"}),"Notice"]})]})})]},e.id)})})]})})})]})}),v&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(i.Z,{className:"w-6 h-6 text-primary-600 mr-3"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Rent Periods & Late Fee Management"})]}),a.jsx("button",{onClick:()=>_(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Close"})]}),a.jsx("div",{className:"p-6",children:0===w.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(i.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Rent Periods Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"No rent periods have been generated for this tenant yet."}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-left max-w-md mx-auto",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Tenant Summary:"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:[a.jsx("span",{className:"font-medium",children:"Total Due:"})," $",(b?.total_due||0).toLocaleString()]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"font-medium",children:"Late Fees:"})," $",(b?.total_late_fees||0).toLocaleString()]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"font-medium",children:"Late Periods:"})," ",b?.late_periods||0]})]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Totals Comparison:"}),(0,a.jsxs)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded",children:[a.jsx("h5",{className:"font-medium text-green-800 mb-2",children:"✓ Late Tenants Service (Correct):"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Total Due:"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-green-600",children:["$",(b?.total_due||0).toLocaleString()]})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Late Fees:"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-green-600",children:["$",(b?.total_late_fees||0).toLocaleString()]})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Late Periods:"}),a.jsx("p",{className:"text-lg font-semibold text-green-600",children:b?.late_periods||0})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Days Late:"}),a.jsx("p",{className:"text-lg font-semibold text-green-600",children:b?.days_late||0})]})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:[a.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"ℹ Rent Periods Data (For Reference):"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Total Periods:"}),a.jsx("p",{className:"text-lg font-semibold text-blue-600",children:w.length})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Unpaid Amount:"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-blue-600",children:["$",w.filter(e=>"paid"!==e.status).reduce((e,t)=>e+(t.rent_amount-t.amount_paid),0).toLocaleString()]})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Late Fees:"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-blue-600",children:["$",w.filter(e=>!e.late_fee_waived).reduce((e,t)=>e+t.late_fee_applied,0).toLocaleString()]})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-gray-600",children:"Total Due:"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-blue-600",children:["$",(w.filter(e=>"paid"!==e.status).reduce((e,t)=>e+(t.rent_amount-t.amount_paid),0)+w.filter(e=>!e.late_fee_waived).reduce((e,t)=>e+t.late_fee_applied,0)).toLocaleString()]})]})]})]}),a.jsx("div",{className:"mt-3 text-sm text-gray-600",children:(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Note:"})," The Late Tenants Service uses a different calculation method based on lease start dates and actual payments, which is why the totals may differ from the rent periods data."]})})]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Due Date"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Rent Amount"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Amount Paid"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Status"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Late Fee"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),a.jsx("tbody",{children:w.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[a.jsx("td",{className:"py-4 px-4",children:new Date(e.period_due_date).toLocaleDateString()}),(0,a.jsxs)("td",{className:"py-4 px-4 font-medium",children:["$",e.rent_amount.toLocaleString()]}),(0,a.jsxs)("td",{className:"py-4 px-4",children:["$",e.amount_paid.toLocaleString()]}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"paid"===e.status?"bg-green-100 text-green-800":"partial"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:e.status})}),a.jsx("td",{className:"py-4 px-4",children:y?.periodId===e.id?a.jsx("input",{type:"number",min:"0",step:"0.01",defaultValue:e.late_fee_applied,className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm",onChange:e=>R(parseFloat(e.target.value)||0),onKeyDown:t=>{"Enter"===t.key&&A(e.id,P)}}):(0,a.jsxs)("span",{className:`font-medium ${e.late_fee_waived?"text-gray-500 line-through":"text-red-600"}`,children:["$",e.late_fee_applied.toLocaleString(),e.late_fee_waived&&" (waived)"]})}),a.jsx("td",{className:"py-4 px-4",children:y?.periodId===e.id?(0,a.jsxs)("div",{className:"flex space-x-1",children:[a.jsx("button",{onClick:()=>{A(e.id,P)},className:"bg-green-600 text-white p-1 rounded text-xs hover:bg-green-700",children:a.jsx(c,{className:"w-3 h-3"})}),a.jsx("button",{onClick:()=>{N(null),R(0)},className:"bg-gray-600 text-white p-1 rounded text-xs hover:bg-gray-700",children:a.jsx(x.Z,{className:"w-3 h-3"})})]}):a.jsx("button",{onClick:()=>{R(e.late_fee_applied),N({tenantId:e.tenant_id,periodId:e.id,lateFee:e.late_fee_applied})},className:"bg-blue-600 text-white p-1 rounded text-xs hover:bg-blue-700",children:a.jsx(m,{className:"w-3 h-3"})})})]},e.id))})]})})]})})]})}),g&&b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(d.Z,{className:"w-6 h-6 text-primary-600 mr-3"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"5-Day Notice to Vacate or Pay Rent"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>{window.print()},className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center",children:[a.jsx(h,{className:"w-4 h-4 mr-2"}),"Print"]}),a.jsx("button",{onClick:()=>j(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center",children:"Close"})]})]}),a.jsx("div",{className:"p-6",children:a.jsx(f,{tenant:b})})]})})]}))}},7464:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(1109).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},3106:()=>{},5993:(e,t,s)=>{"use strict";s(3106);var a=s(3677),r=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(a),n="undefined"!=typeof process&&process.env&&!0,l=function(e){return"[object String]"===Object.prototype.toString.call(e)},i=function(){function e(e){var t=void 0===e?{}:e,s=t.name,a=void 0===s?"stylesheet":s,r=t.optimizeForSpeed,i=void 0===r?n:r;d(l(a),"`name` must be a string"),this._name=a,this._deletedRulePlaceholder="#"+a+"-deleted-rule____{}",d("boolean"==typeof i,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=i,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;d(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){return d(l(e),"`insertRule` accepts only strings"),"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++},t.replaceRule=function(e,t){this._optimizeForSpeed;var s=this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(a){n||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}return e},t.deleteRule=function(e){this._serverSheet.deleteRule(e)},t.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},t.cssRules=function(){return this._serverSheet.cssRules},t.makeStyleTag=function(e,t,s){t&&d(l(t),"makeStyleTag accepts only strings as second parameter");var a=document.createElement("style");this._nonce&&a.setAttribute("nonce",this._nonce),a.type="text/css",a.setAttribute("data-"+e,""),t&&a.appendChild(document.createTextNode(t));var r=document.head||document.getElementsByTagName("head")[0];return s?r.insertBefore(a,s):r.appendChild(a),a},function(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function d(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var o=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},c={};function x(e,t){if(!t)return"jsx-"+e;var s=String(t),a=e+s;return c[a]||(c[a]="jsx-"+o(e+"-"+s)),c[a]}function m(e,t){var s=e+(t=t.replace(/\/style/gi,"\\/style"));return c[s]||(c[s]=t.replace(/__jsx-style-dynamic-selector/g,e)),c[s]}var h=a.createContext(null);h.displayName="StyleSheetContext",r.default.useInsertionEffect||r.default.useLayoutEffect;var p=void 0;function b(e){var t=p||a.useContext(h);return t&&t.add(e),null}b.dynamic=function(e){return e.map(function(e){return x(e[0],e[1])}).join(" ")},t.style=b},4052:(e,t,s)=>{"use strict";e.exports=s(5993).style},5070:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(3189).createProxy)(String.raw`C:\Projects\Rental_App\apps\web\app\late-tenants\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[784,891,152],()=>s(9712));module.exports=a})();