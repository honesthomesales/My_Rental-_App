exports.id=152,exports.ids=[152],exports.modules={1223:()=>{},4837:()=>{},869:(e,t,a)=>{Promise.resolve().then(a.bind(a,8130)),Promise.resolve().then(a.bind(a,4155))},6406:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,4424,23)),Promise.resolve().then(a.t.bind(a,7752,23)),Promise.resolve().then(a.t.bind(a,5275,23)),Promise.resolve().then(a.t.bind(a,9842,23)),Promise.resolve().then(a.t.bind(a,1633,23)),Promise.resolve().then(a.t.bind(a,9224,23))},6407:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,6568,23))},8130:(e,t,a)=>{"use strict";a.d(t,{Header:()=>m});var r=a(3227),s=a(3677),n=a(1043),i=a(3239),l=a(1692),o=a(401),c=a(582),p=a(3540),d=a(426),u=a(5368),_=a(7587);function y({className:e="w-8 h-8"}){return(0,r.jsxs)("svg",{viewBox:"0 0 120 60",className:e,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M10 20 L30 10 L50 20 L70 10 L90 20 L110 10 L110 25 L10 25 Z",fill:"#dc2626",stroke:"#991b1b",strokeWidth:"1"}),r.jsx("rect",{x:"55",y:"5",width:"8",height:"15",fill:"#374151"}),r.jsx("rect",{x:"15",y:"27",width:"8",height:"6",fill:"#374151"}),r.jsx("rect",{x:"55",y:"27",width:"8",height:"6",fill:"#374151"}),r.jsx("rect",{x:"95",y:"27",width:"8",height:"6",fill:"#374151"}),r.jsx("text",{x:"60",y:"50",textAnchor:"middle",fill:"#374151",fontSize:"8",fontFamily:"Arial, sans-serif",fontWeight:"bold",children:"Honest Home Sales"})]})}function m(){let[e,t]=(0,s.useState)(!1),a=(0,n.useRouter)(),m=[{label:"Dashboard",icon:r.jsx(i.Z,{className:"w-5 h-5 mr-2"}),href:"/"},{label:"Properties",icon:r.jsx(l.Z,{className:"w-5 h-5 mr-2"}),href:"/properties"},{label:"Tenants",icon:r.jsx(o.Z,{className:"w-5 h-5 mr-2"}),href:"/tenants"},{label:"Payments",icon:r.jsx(c.Z,{className:"w-5 h-5 mr-2"}),href:"/payments"},{label:"Late Tenants",icon:r.jsx(p.Z,{className:"w-5 h-5 mr-2"}),href:"/late-tenants"},{label:"Profit",icon:r.jsx(d.Z,{className:"w-5 h-5 mr-2"}),href:"/profit"}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("header",{className:"w-full bg-white shadow-sm border-b border-gray-200 flex items-center h-16 px-4 z-50 sticky top-0",children:[r.jsx("button",{className:"text-gray-700 hover:text-primary-600 focus:outline-none mr-4",onClick:()=>t(!0),"aria-label":"Open menu",children:r.jsx(u.Z,{className:"w-7 h-7"})}),r.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Rental Management App"}),r.jsx("div",{className:"ml-4 flex items-center",children:r.jsx(y,{className:"w-8 h-8"})})]}),r.jsx("div",{className:`fixed inset-0 z-[9999] transition-all duration-300 ${e?"visible":"invisible pointer-events-none"}`,style:{background:e?"rgba(0,0,0,0.3)":"transparent"},onClick:()=>t(!1),children:(0,r.jsxs)("nav",{className:`fixed top-0 left-0 h-full w-72 bg-white shadow-xl transform transition-transform duration-300 z-[10000] ${e?"translate-x-0":"-translate-x-full"}`,onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-lg font-bold text-gray-900 mr-3",children:"Menu"}),r.jsx(y,{className:"w-6 h-6"})]}),r.jsx("button",{className:"text-gray-500 hover:text-primary-600 focus:outline-none",onClick:()=>t(!1),"aria-label":"Close menu",children:r.jsx(_.Z,{className:"w-6 h-6"})})]}),r.jsx("ul",{className:"py-4",children:m.map(e=>r.jsx("li",{children:(0,r.jsxs)("button",{className:"w-full flex items-center px-6 py-3 text-gray-700 hover:bg-primary-50 hover:text-primary-700 text-base font-medium transition-colors",onClick:()=>{t(!1),a.push(e.href)},children:[e.icon,e.label]})},e.href))})]})})]})}},5281:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supabase=void 0,t.getSupabaseClient=o,t.resetSupabaseClient=function(){i&&(i=null),l=!1},t.handleSupabaseError=function(e){return e?.message?e.message:e?.error_description?e.error_description:"An unexpected error occurred"},t.createApiResponse=function(e,t=null){return{data:e,error:t,success:!t}};let r=a(8891),s="https://gnisgfojzrrnidizrycj.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImduaXNnZm9qenJybmlkaXpyeWNqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE3NjgyMDMsImV4cCI6MjA2NzM0NDIwM30.jLRIt4mqNa-6rnWudT_ciCvfPC0i0WlWFrCgC7NbhYM",i=null,l=!1;function o(){if(i)return i;if(l)throw Error("Supabase client is already being initialized");try{return l=!0,i=function(){if(!s||!n)throw Error("Missing Supabase environment variables for React Native.");return(0,r.createClient)(s,n,{auth:{autoRefreshToken:!1,persistSession:!1,detectSessionInUrl:!1,storageKey:"rental-app-rn-auth"},global:{headers:{"X-Client-Info":"rental-app-rn"}}})}()}finally{l=!1}}t.supabase=o()},2049:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supabase=void 0,t.getSupabaseClient=function(){throw Error("Supabase client cannot be used on the server side")},t.resetSupabaseClient=function(){r&&(r=null)},t.handleSupabaseError=function(e){return e?.message?e.message:e?.error_description?e.error_description:"An unexpected error occurred"},t.createApiResponse=function(e,t=null){return{data:e,error:t,success:!t}},a(8891);let r=null;t.supabase=null},4638:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5579:(e,t,a)=>{"use strict";var r=Object.create?function(e,t,a,r){void 0===r&&(r=a);var s=Object.getOwnPropertyDescriptor(t,a);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,r,s)}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]},s=function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||r(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.OtherService=t.RentPeriodsService=t.PaymentsService=t.TransactionsService=t.LeasesService=t.TenantsService=t.PropertiesService=t.createApiResponseRN=t.handleSupabaseErrorRN=t.supabaseRN=t.createApiResponse=t.handleSupabaseError=t.supabase=void 0,s(a(2270),t),s(a(4638),t),s(a(8702),t);var n=a(2049);Object.defineProperty(t,"supabase",{enumerable:!0,get:function(){return n.supabase}}),Object.defineProperty(t,"handleSupabaseError",{enumerable:!0,get:function(){return n.handleSupabaseError}}),Object.defineProperty(t,"createApiResponse",{enumerable:!0,get:function(){return n.createApiResponse}});var i=a(5281);Object.defineProperty(t,"supabaseRN",{enumerable:!0,get:function(){return i.supabase}}),Object.defineProperty(t,"handleSupabaseErrorRN",{enumerable:!0,get:function(){return i.handleSupabaseError}}),Object.defineProperty(t,"createApiResponseRN",{enumerable:!0,get:function(){return i.createApiResponse}});var l=a(7871);Object.defineProperty(t,"PropertiesService",{enumerable:!0,get:function(){return l.PropertiesService}});var o=a(6151);Object.defineProperty(t,"TenantsService",{enumerable:!0,get:function(){return o.TenantsService}});var c=a(1851);Object.defineProperty(t,"LeasesService",{enumerable:!0,get:function(){return c.LeasesService}});var p=a(3235);Object.defineProperty(t,"TransactionsService",{enumerable:!0,get:function(){return p.TransactionsService}});var d=a(6988);Object.defineProperty(t,"PaymentsService",{enumerable:!0,get:function(){return d.PaymentsService}});var u=a(1002);Object.defineProperty(t,"RentPeriodsService",{enumerable:!0,get:function(){return u.RentPeriodsService}});var _=a(3466);Object.defineProperty(t,"OtherService",{enumerable:!0,get:function(){return _.OtherService}})},1851:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LeasesService=void 0;let r=a(2049);class s{static async getAll(){try{let e=(0,r.getSupabaseClient)(),{data:t,error:a}=await e.from("RENT_leases").select("*").order("lease_start_date",{ascending:!1});if(a)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(a));return(0,r.createApiResponse)(t)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getByPropertyId(e){try{let t=(0,r.getSupabaseClient)(),{data:a,error:s}=await t.from("RENT_leases").select("*").eq("property_id",e).order("lease_start_date",{ascending:!1});if(s)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));return(0,r.createApiResponse)(a)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getActiveLeasesByPropertyId(e){try{let t=(0,r.getSupabaseClient)(),a=new Date().toISOString().split("T")[0],{data:s,error:n}=await t.from("RENT_leases").select("*").eq("property_id",e).lte("lease_start_date",a).gte("lease_end_date",a).order("lease_start_date",{ascending:!1});if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));return(0,r.createApiResponse)(s)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async hasActiveLeases(e){try{let t=await this.getActiveLeasesByPropertyId(e);if(!t.success)return(0,r.createApiResponse)(!1);let a=t.data&&t.data.length>0;return(0,r.createApiResponse)(a)}catch(e){return(0,r.createApiResponse)(!1)}}static async create(e){try{let t=(0,r.getSupabaseClient)(),{data:a,error:s}=await t.from("RENT_leases").insert([e]).select().single();if(s)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));return(0,r.createApiResponse)(a)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async update(e,t){try{let a=(0,r.getSupabaseClient)(),{data:s,error:n}=await a.from("RENT_leases").update(t).eq("id",e).select().single();if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));return(0,r.createApiResponse)(s)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async delete(e){try{let t=(0,r.getSupabaseClient)(),{error:a}=await t.from("RENT_leases").delete().eq("id",e);if(a)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(a));return(0,r.createApiResponse)(!0)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async updateLeaseStatus(e){try{let t=(0,r.getSupabaseClient)(),a=new Date().toISOString().split("T")[0],{data:s,error:n}=await t.from("RENT_leases").select("*").eq("id",e).single();if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));let i="active";if(a<s.lease_start_date?i="pending":a>s.lease_end_date&&(i="expired"),s.status!==i)return await this.update(e,{status:i});return(0,r.createApiResponse)(s)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getAllPropertiesWithLeaseStatus(){try{let e=(0,r.getSupabaseClient)(),{data:t,error:a}=await e.from("RENT_leases").select("*").eq("status","active");if(a)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(a));let s=new Map;(t||[]).forEach(e=>{s.has(e.property_id)||s.set(e.property_id,[]),s.get(e.property_id).push(e)});let{data:n,error:i}=await e.from("RENT_properties").select("id");if(i)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(i));let l=(n||[]).map(e=>{let t=s.get(e.id)||[];return{property_id:e.id,has_active_lease:t.length>0,active_lease_count:t.length,active_leases:t}});return(0,r.createApiResponse)(l)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}}t.LeasesService=s},3466:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OtherService=void 0;let r=a(2049);class s{static async getAll(){try{let e=(0,r.getSupabaseClient)(),{data:t,error:a}=await e.from("rent_other").select("*").order("date",{ascending:!1});if(a)return console.error("OtherService.getAll error:",a),(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(a));return(0,r.createApiResponse)(t)}catch(e){return console.error("OtherService.getAll exception:",e),(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getByDateRange(e,t){try{let a=(0,r.getSupabaseClient)(),{data:s,error:n}=await a.from("rent_other").select("*").gte("date",e).lte("date",t).order("date",{ascending:!1});if(n)return console.error("OtherService.getByDateRange error:",n),(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));return(0,r.createApiResponse)(s)}catch(e){return console.error("OtherService.getByDateRange exception:",e),(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async create(e){try{let t=(0,r.getSupabaseClient)(),{data:a,error:s}=await t.from("rent_other").insert([e]).select().single();if(s)return console.error("OtherService.create error:",s),(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));return(0,r.createApiResponse)(a)}catch(e){return console.error("OtherService.create exception:",e),(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async update(e){try{let t=(0,r.getSupabaseClient)(),{id:a,...s}=e,{data:n,error:i}=await t.from("rent_other").update(s).eq("id",a).select().single();if(i)return console.error("OtherService.update error:",i),(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(i));return(0,r.createApiResponse)(n)}catch(e){return console.error("OtherService.update exception:",e),(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async delete(e){try{let t=(0,r.getSupabaseClient)(),{error:a}=await t.from("rent_other").delete().eq("id",e);if(a)return console.error("OtherService.delete error:",a),(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(a));return(0,r.createApiResponse)(!0)}catch(e){return console.error("OtherService.delete exception:",e),(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}}t.OtherService=s},6988:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentsService=void 0;let r=a(2049);class s{static async getAll(){try{let e=(0,r.getSupabaseClient)(),{data:t,error:a}=await e.from("RENT_payments").select("*").order("created_at",{ascending:!1});if(a)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(a));return(0,r.createApiResponse)(t)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getByDateRange(e,t){try{let a=(0,r.getSupabaseClient)(),{data:s,error:n}=await a.from("RENT_payments").select("*").gte("payment_date",e).lte("payment_date",t).order("payment_date",{ascending:!1});if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));return(0,r.createApiResponse)(s)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getMostRecentMonthWithPayments(){try{let e=(0,r.getSupabaseClient)(),{data:t,error:a}=await e.from("RENT_payments").select("payment_date").order("payment_date",{ascending:!1}).limit(1);if(a)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(a));if(!t||0===t.length){let e=new Date;return(0,r.createApiResponse)({year:e.getFullYear(),month:e.getMonth()})}let s=t[0],n=new Date(s.payment_date);return(0,r.createApiResponse)({year:n.getFullYear(),month:n.getMonth()})}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getPropertiesWithTenants(){try{let e=(0,r.getSupabaseClient)(),{data:t,error:a}=await e.from("RENT_properties").select("id, name, address, city, state, monthly_rent, notes").order("name");if(a)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(a));let{data:s,error:n}=await e.from("RENT_tenants").select("id, first_name, last_name, property_id").eq("is_active",!0);if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));let{data:i,error:l}=await e.from("RENT_leases").select("id, tenant_id, rent_cadence, rent, lease_start_date, lease_end_date, status").eq("status","active");if(l)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(l));let o=(t||[]).map(e=>{let t=(s||[]).filter(t=>t.property_id===e.id),a=(i||[]).filter(e=>t.some(t=>t.id===e.tenant_id));return{...e,tenants:t,leases:a}});return(0,r.createApiResponse)(o)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async createPayment(e){try{let t=(0,r.getSupabaseClient)(),{data:a,error:s}=await t.from("RENT_payments").insert([{payment_date:e.payment_date,amount:e.amount,property_id:e.property_id,tenant_id:e.tenant_id,payment_type:e.payment_type,notes:e.notes}]).select().single();if(s)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));return(0,r.createApiResponse)(a)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async updatePayment(e,t){try{let a=(0,r.getSupabaseClient)(),{data:s,error:n}=await a.from("RENT_payments").update(t).eq("id",e).select().single();if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));return(0,r.createApiResponse)(s)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async deletePayment(e){try{let t=(0,r.getSupabaseClient)(),{error:a}=await t.from("RENT_payments").delete().eq("id",e);if(a)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(a));return(0,r.createApiResponse)(!0)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getByPropertyAndDateRange(e,t,a){try{let s=(0,r.getSupabaseClient)(),{data:n,error:i}=await s.from("RENT_payments").select("*").eq("property_id",e).gte("payment_date",t).lte("payment_date",a).order("payment_date",{ascending:!1});if(i)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(i));return(0,r.createApiResponse)(n)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}}t.PaymentsService=s},7871:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertiesService=void 0;let r=a(2049),s=a(1851);class n{static async getAll(e){try{let t=(0,r.getSupabaseClient)().from("RENT_properties").select(`
          id,
          name,
          address,
          city,
          state,
          zip_code,
          property_type,
          status,
          bedrooms,
          bathrooms,
          square_feet,
          year_built,
          purchase_price,
          purchase_payment,
          purchase_date,
          current_value,
          monthly_rent,
          is_for_rent,
          is_for_sale,
          insurance_premium,
          property_tax,
          notes,
          created_at,
          updated_at
        `).order("created_at",{ascending:!1});e?.is_for_rent!==void 0&&(t=t.eq("is_for_rent",e.is_for_rent)),e?.is_for_sale!==void 0&&(t=t.eq("is_for_sale",e.is_for_sale)),e?.city&&(t=t.eq("city",e.city)),e?.state&&(t=t.eq("state",e.state));let{data:a,error:n}=await t;if(n)return console.error("PropertiesService.getAll error:",n),(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));let i=await s.LeasesService.getAllPropertiesWithLeaseStatus();if(!i.success||!i.data)return(0,r.createApiResponse)(a);let l=new Map(i.data.map(e=>[e.property_id,e])),o=a.map(e=>{let t=l.get(e.id),a=t?.has_active_lease||!1;return{...e,status:a?"rented":"empty",active_leases:t?.active_leases||[],active_lease_count:t?.active_lease_count||0}});return(0,r.createApiResponse)(o)}catch(e){return console.error("PropertiesService.getAll exception:",e),(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getById(e){try{let t=(0,r.getSupabaseClient)(),{data:a,error:s}=await t.from("RENT_properties").select("*").eq("id",e).single();if(s)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));let{data:n}=await t.from("RENT_tenants").select("*").eq("property_id",e).eq("is_active",!0),i={...a,tenants:n||[]};return(0,r.createApiResponse)(i)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async create(e){try{let t=(0,r.getSupabaseClient)(),{data:a,error:s}=await t.from("RENT_properties").insert([e]).select().single();if(s)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));return(0,r.createApiResponse)(a)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async update(e,t){try{let a=(0,r.getSupabaseClient)(),{data:s,error:n}=await a.from("RENT_properties").update(t).eq("id",e).select().single();if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));return(0,r.createApiResponse)(s)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async delete(e){try{let t=(0,r.getSupabaseClient)(),{error:a}=await t.from("RENT_properties").delete().eq("id",e);if(a)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(a));return(0,r.createApiResponse)(!0)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getPaginated(e=1,t=10,a){try{let s=(0,r.getSupabaseClient)(),n=(e-1)*t,i=s.from("RENT_properties").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(n,n+t-1);a?.is_for_rent!==void 0&&(i=i.eq("is_for_rent",a.is_for_rent)),a?.is_for_sale!==void 0&&(i=i.eq("is_for_sale",a.is_for_sale)),a?.city&&(i=i.eq("city",a.city)),a?.state&&(i=i.eq("state",a.state));let{data:l,error:o,count:c}=await i;if(o)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(o));let p=await Promise.all(l.map(async e=>{let{data:t}=await s.from("RENT_tenants").select("*").eq("property_id",e.id);return{...e,tenants:t||[]}})),d=c||0;return(0,r.createApiResponse)({data:p,total:d,page:e,limit:t,hasMore:n+t<d})}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async search(e){try{let t=(0,r.getSupabaseClient)(),{data:a,error:s}=await t.from("RENT_properties").select("*").or(`name.ilike.%${e}%,address.ilike.%${e}%,city.ilike.%${e}%`).order("created_at",{ascending:!1});if(s)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));let n=await Promise.all(a.map(async e=>{let{data:a}=await t.from("RENT_tenants").select("*").eq("property_id",e.id);return{...e,tenants:a||[]}}));return(0,r.createApiResponse)(n)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getAvailableForRent(){return this.getAll({is_for_rent:!0})}static async getAvailableForSale(){return this.getAll({is_for_sale:!0})}}t.PropertiesService=n},1002:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RentPeriodsService=void 0;let r=a(2049);class s{static async createRentPeriods(e,t){try{let a=(0,r.getSupabaseClient)();if(!t.lease_start_date||!t.rent||!t.rent_cadence)return(0,r.createApiResponse)(null,"Missing lease information");let s=[],n=new Date(t.lease_start_date),i=new Date,l=new Date(n);for(;l<=i;){let a=new Date(l),r=(a<i?Math.floor((i.getTime()-a.getTime())/864e5):0)>5,n=0;if(r)switch(t.rent_cadence.toLowerCase().trim()){case"weekly":n=10;break;case"bi-weekly":case"biweekly":case"bi_weekly":n=20;break;default:n=50}switch(s.push({tenant_id:e.id,property_id:e.property_id||"",lease_id:t.id,period_due_date:a.toISOString().split("T")[0],rent_amount:t.rent,rent_cadence:t.rent_cadence,status:"unpaid",amount_paid:0,late_fee_applied:n,late_fee_waived:!1,due_date_override:void 0,notes:void 0}),t.rent_cadence.toLowerCase().trim()){case"weekly":l.setDate(l.getDate()+7);break;case"bi-weekly":case"biweekly":case"bi_weekly":l.setDate(l.getDate()+14);break;default:l.setMonth(l.getMonth()+1)}}let{data:o,error:c}=await a.from("RENT_rent_periods").insert(s).select("*");if(c)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(c));return(0,r.createApiResponse)(o)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getTenantRentPeriods(e){try{let t=(0,r.getSupabaseClient)(),{data:a,error:s}=await t.from("RENT_rent_periods").select("*").eq("tenant_id",e).order("period_due_date",{ascending:!0});if(s)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));return(0,r.createApiResponse)(a)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async updateRentPeriod(e,t){try{let a=(0,r.getSupabaseClient)(),{data:s,error:n}=await a.from("RENT_rent_periods").update(t).eq("id",e).select("*").single();if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));return(0,r.createApiResponse)(s)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async calculateTenantOwedAmount(e){try{let t=await this.getTenantRentPeriods(e);if(!t.success||!t.data)return(0,r.createApiResponse)(null,t.error);let a=t.data,s=0,n=0,i=0;for(let e of a)if("paid"!==e.status){let t=e.rent_amount-e.amount_paid;s+=t,e.late_fee_applied>0&&!e.late_fee_waived&&(n+=e.late_fee_applied),t>0&&i++}return(0,r.createApiResponse)({totalOwed:s,totalLateFees:n,missedPeriods:i,periods:a})}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async allocatePayment(e,t){try{let a=(0,r.getSupabaseClient)(),s=t.map(t=>({payment_id:e,rent_period_id:t.rent_period_id,amount_allocated:t.amount})),{error:n}=await a.from("RENT_payment_allocations").insert(s);if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));for(let e of t){let{data:t,error:s}=await a.from("RENT_rent_periods").select("amount_paid, rent_amount").eq("id",e.rent_period_id).single();if(s)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));let n=(t.amount_paid||0)+e.amount,i=n>=t.rent_amount?"paid":"partial",{error:l}=await a.from("RENT_rent_periods").update({amount_paid:n,status:i}).eq("id",e.rent_period_id);if(l)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(l))}return(0,r.createApiResponse)(!0)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}}t.RentPeriodsService=s},6151:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TenantsService=void 0;let r=a(2049);class s{static async getAll(e){try{let t=(0,r.getSupabaseClient)(),a=t.from("RENT_tenants").select("*").order("created_at",{ascending:!1});e?.property_id&&(a=a.eq("property_id",e.property_id)),e?.is_active!==void 0&&(a=a.eq("is_active",e.is_active)),e?.late_status&&(a=a.eq("late_status",e.late_status));let{data:s,error:n}=await a;if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));let i=await Promise.all(s.map(async e=>{let a=null;if(e.property_id){let{data:r}=await t.from("RENT_properties").select("id, name, address, notes, monthly_rent").eq("id",e.property_id).single();a=r}let{data:r}=await t.from("RENT_leases").select("*").eq("tenant_id",e.id).order("lease_start_date",{ascending:!1});return{...e,properties:a,leases:r||[]}}));return(0,r.createApiResponse)(i)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getById(e){try{let t=(0,r.getSupabaseClient)(),{data:a,error:s}=await t.from("RENT_tenants").select("*").eq("id",e).single();if(s)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));let n=null;if(a.property_id){let{data:e}=await t.from("RENT_properties").select("id, name, address, notes, monthly_rent").eq("id",a.property_id).single();n=e}let{data:i}=await t.from("RENT_leases").select("*").eq("tenant_id",a.id).order("lease_start_date",{ascending:!1}),l={...a,properties:n,leases:i||[]};return(0,r.createApiResponse)(l)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async create(e){try{let t=(0,r.getSupabaseClient)(),{data:a,error:s}=await t.from("RENT_tenants").insert([e]).select("*").single();if(s)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));if(e.rent_cadence&&a.property_id){let r={tenant_id:a.id,property_id:a.property_id,lease_start_date:e.lease_start_date||new Date().toISOString(),lease_end_date:e.lease_end_date||new Date(Date.now()+31536e6).toISOString(),rent:e.monthly_rent||0,rent_cadence:e.rent_cadence,move_in_fee:0,late_fee_amount:50,status:"active"};await t.from("RENT_leases").insert([r])}let n=null;if(a.property_id){let{data:e}=await t.from("RENT_properties").select("id, name, address, notes, monthly_rent").eq("id",a.property_id).single();n=e}let{data:i}=await t.from("RENT_leases").select("*").eq("tenant_id",a.id).order("lease_start_date",{ascending:!1}),l={...a,properties:n,leases:i||[]};return(0,r.createApiResponse)(l)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async update(e,t){try{let a=(0,r.getSupabaseClient)(),{data:s,error:n}=await a.from("RENT_tenants").update(t).eq("id",e).select("*").single();if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));if(t.rent_cadence&&s.property_id){let{data:e}=await a.from("RENT_leases").select("id, lease_start_date, lease_end_date").eq("tenant_id",s.id).eq("status","active").single();if(e)await a.from("RENT_leases").update({rent_cadence:t.rent_cadence,rent:t.monthly_rent||0,lease_start_date:t.lease_start_date||e.lease_start_date,lease_end_date:t.lease_end_date||e.lease_end_date}).eq("id",e.id);else{let e={tenant_id:s.id,property_id:s.property_id,lease_start_date:t.lease_start_date||new Date().toISOString(),lease_end_date:t.lease_end_date||new Date(Date.now()+31536e6).toISOString(),rent:t.monthly_rent||0,rent_cadence:t.rent_cadence,move_in_fee:0,late_fee_amount:50,status:"active"};await a.from("RENT_leases").insert([e])}}let i=null;if(s.property_id){let{data:e}=await a.from("RENT_properties").select("id, name, address, notes, monthly_rent").eq("id",s.property_id).single();i=e}let{data:l}=await a.from("RENT_leases").select("*").eq("tenant_id",s.id).order("lease_start_date",{ascending:!1}),o={...s,properties:i,leases:l||[]};return(0,r.createApiResponse)(o)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async delete(e){try{let t=(0,r.getSupabaseClient)(),{error:a}=await t.from("RENT_tenants").delete().eq("id",e);if(a)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(a));return(0,r.createApiResponse)(!0)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getPaginated(e=1,t=10,a){try{let s=(0,r.getSupabaseClient)(),n=(e-1)*t,i=s.from("RENT_tenants").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(n,n+t-1);a?.property_id&&(i=i.eq("property_id",a.property_id)),a?.is_active!==void 0&&(i=i.eq("is_active",a.is_active)),a?.late_status&&(i=i.eq("late_status",a.late_status));let{data:l,error:o,count:c}=await i;if(o)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(o));let p=await Promise.all(l.map(async e=>{let t=null;if(e.property_id){let{data:a}=await s.from("RENT_properties").select("id, name, address").eq("id",e.property_id).single();t=a}let{data:a}=await s.from("RENT_leases").select("*").eq("tenant_id",e.id).order("lease_start_date",{ascending:!1});return{...e,properties:t,leases:a||[]}}));return(0,r.createApiResponse)({data:p,total:c||0,page:e,limit:t,hasMore:n+t<(c||0)})}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async search(e){try{let t=(0,r.getSupabaseClient)(),{data:a,error:s}=await t.from("RENT_tenants").select("*").or(`first_name.ilike.%${e}%,last_name.ilike.%${e}%,email.ilike.%${e}%`).order("created_at",{ascending:!1});if(s)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));let n=await Promise.all(a.map(async e=>{let a=null;if(e.property_id){let{data:r}=await t.from("RENT_properties").select("id, name, address").eq("id",e.property_id).single();a=r}let{data:r}=await t.from("RENT_leases").select("*").eq("tenant_id",e.id).order("lease_start_date",{ascending:!1});return{...e,properties:a,leases:r||[]}}));return(0,r.createApiResponse)(n)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getActive(){return this.getAll({is_active:!0})}static async getLate(){try{let e=(0,r.getSupabaseClient)(),{data:t,error:a}=await e.from("RENT_tenants").select("*").neq("late_status","on_time").order("created_at",{ascending:!1});if(a)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(a));let s=await Promise.all(t.map(async t=>{let a=null;if(t.property_id){let{data:r}=await e.from("RENT_properties").select("id, name, address").eq("id",t.property_id).single();a=r}let{data:r}=await e.from("RENT_leases").select("*").eq("tenant_id",t.id).order("lease_start_date",{ascending:!1});return{...t,properties:a,leases:r||[]}}));return(0,r.createApiResponse)(s)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getByProperty(e){return this.getAll({property_id:e})}static async recordPayment(e,t){try{let a=(0,r.getSupabaseClient)(),{data:s,error:n}=await a.from("RENT_tenants").select("*").eq("id",e).single();if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));if(!s)return(0,r.createApiResponse)(null,"Tenant not found");let i=null;if(s.property_id){let{data:e}=await a.from("RENT_properties").select("id, name, address, notes, monthly_rent").eq("id",s.property_id).single();i=e}let l=[...s.payment_history,{date:t.payment_date,amount:t.amount,status:"completed"}],o="on_time",c=0;if(i&&s.lease_start_date){let e={...s,payment_history:l},t=this.calculateTotalLatePayments(e,i);t.totalDue>0&&(c=t.totalLateFees,o=t.latePeriods>=3?"eviction_notice":t.latePeriods>=2?"late_10_days":"late_5_days")}let{data:p,error:d}=await a.from("RENT_tenants").update({payment_history:l,last_payment_date:t.payment_date,late_fees_owed:c,late_status:o}).eq("id",e).select("*, RENT_properties(name, address, notes, monthly_rent)").single();if(d)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(d));return(0,r.createApiResponse)(p)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getLateTenants(){try{let e=(0,r.getSupabaseClient)(),{data:t,error:a}=await e.from("RENT_tenants").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(a)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(a));let s=await Promise.all(t.map(async t=>{let a=null;if(t.property_id){let{data:r}=await e.from("RENT_properties").select("id, name, address, city, state, zip_code, property_type, monthly_rent, notes").eq("id",t.property_id).single();a=r}let{data:r}=await e.from("RENT_leases").select("id, lease_start_date, lease_end_date, rent, rent_cadence, status").eq("tenant_id",t.id).eq("status","active").order("lease_start_date",{ascending:!1}),{data:s}=await e.from("RENT_payments").select("id, amount, payment_date, payment_type").eq("tenant_id",t.id).order("payment_date",{ascending:!1});return{...t,properties:a,leases:r||[],actualPayments:s||[]}})),n=[];for(let e of s){if(!e.properties||!e.leases||0===e.leases.length)continue;let t=e.leases[0];if(!t.lease_start_date||!t.rent)continue;let a=new Date(t.lease_start_date),r=new Date;if(a>r||t.rent<=0)continue;let s=Math.floor((r.getTime()-a.getTime())/864e5);if(s<7||s>3650)continue;let i=t.rent_cadence||"monthly",l=0,o=30;switch(i.toLowerCase().trim()){case"weekly":l=Math.ceil(s/7),o=7;break;case"bi-weekly":case"biweekly":case"bi_weekly":l=Math.ceil(s/14),o=14;break;default:l=Math.ceil(s/30),o=30}let c=t.rent*l,p=(e.actualPayments||[]).reduce((e,t)=>e+t.amount,0),d=!1,u=0,_=0,y=0;if(p<c){d=!0,u=c-p;let e=t.rent;if(_=Math.ceil(u/e),l>0){let e=new Date(a);e.setDate(e.getDate()+o*(l-1));let t=new Date(e);t.setDate(t.getDate()+5),r>t?y=Math.floor((r.getTime()-t.getTime())/864e5):(y=Math.floor((r.getTime()-e.getTime())/864e5))<0&&(y=0)}}else{let s=(e.actualPayments||[]).sort((e,t)=>new Date(e.payment_date).getTime()-new Date(t.payment_date).getTime());if(s.length>0){let e=s[s.length-1],n=new Date(e.payment_date),i=new Date(a);i.setDate(i.getDate()+o*(l-1));let c=new Date(i);c.setDate(c.getDate()+5),n>c&&(d=!0,u=t.rent,_=1,y=Math.floor((r.getTime()-c.getTime())/864e5))}}if(d){let t=0;switch(i.toLowerCase().trim()){case"weekly":t=10;break;case"bi-weekly":case"biweekly":case"bi_weekly":t=20;break;default:t=50}let a=t*_,r={...e,properties:e.properties,total_due:u,total_late_fees:a,total_outstanding:u,late_periods:_,days_late:Math.max(0,y)};n.push(r)}}return(0,r.createApiResponse)(n)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static calculateTotalDue(e){return e.properties?this.calculateTotalLatePayments(e,e.properties).totalDue:(e.monthly_rent||0)+(e.late_fees_owed||0)}static calculateDaysLate(e){if(!e)return 0;let t=new Date(e);return Math.ceil(Math.abs(new Date().getTime()-t.getTime())/864e5)}static calculateLatePeriods(e,t){if(!e.leases||0===e.leases.length)return 0;switch((e.leases[0].rent_cadence||"monthly").toLowerCase().trim()){case"weekly":return Math.ceil(t/7);case"bi-weekly":case"biweekly":case"bi_weekly":return Math.ceil(t/14);default:return Math.ceil(t/30)}}static calculateLateFees(e,t){if(!e.leases||0===e.leases.length)return 0;let a=(e.leases[0].rent_cadence||"monthly").toLowerCase().trim(),r=0;switch(a){case"weekly":r=10;break;case"bi-weekly":case"biweekly":case"bi_weekly":r=20;break;default:r=50}return t*r}static calculateTotalDueWithLateFees(e,t){return(e.leases&&e.leases.length>0?e.leases[0].rent:e.monthly_rent||0)+t}static calculateTenantOwedAmount(e){if(!e.leases||0===e.leases.length)return{totalOwed:0,totalLateFees:0,missedPeriods:0,missedPayments:[]};let t=e.leases[0],a=t.rent||e.monthly_rent||0,r=t.rent_cadence||"monthly",s=new Date(e.currently_paid_up_date?e.currently_paid_up_date:e.last_payment_date?e.last_payment_date:t.lease_start_date),n=new Date,i=new Date(s),l=0,o=0,c=0,p=[];for(;i<=n;){let e=new Date(i),t=Math.floor((n.getTime()-e.getTime())/864e5)>5,s=t?this.getLateFeeAmount(r):0;switch(l+=a+s,o+=s,c++,p.push({dueDate:e,amount:a,isLate:t,lateFee:s}),r.toLowerCase().trim()){case"weekly":i.setDate(i.getDate()+7);break;case"bi-weekly":case"biweekly":case"bi_weekly":i.setDate(i.getDate()+14);break;default:i.setMonth(i.getMonth()+1)}}return{totalOwed:l,totalLateFees:o,missedPeriods:c,missedPayments:p}}static calculateDaysLateFromPaidUpDate(e){if(!e.leases||0===e.leases.length)return 0;let t=e.leases[0],a=t.rent_cadence||"monthly",r=new Date(e.currently_paid_up_date?e.currently_paid_up_date:e.last_payment_date?e.last_payment_date:t.lease_start_date),s=new Date,n=new Date(r),i=0;for(;n<=s;){let e=new Date(n),t=Math.floor((s.getTime()-e.getTime())/864e5);switch(t>5&&(i+=t-5),a.toLowerCase().trim()){case"weekly":n.setDate(n.getDate()+7);break;case"bi-weekly":case"biweekly":case"bi_weekly":n.setDate(n.getDate()+14);break;default:n.setMonth(n.getMonth()+1)}}return i}static getLateFeeAmount(e){switch(e.toLowerCase().trim()){case"weekly":return 10;case"bi-weekly":case"biweekly":case"bi_weekly":return 20;default:return 45}}static extractRentCadence(e){if(!e)return"monthly";let t=e.match(/Rent cadence:\s*(\w+)/i);return t?t[1]:"monthly"}static daysBetween(e,t){let a=new Date(e);return Math.ceil(Math.abs(new Date(t).getTime()-a.getTime())/864e5)}static getExpectedPaymentDate(e,t,a){let r=new Date(e);switch(a.toLowerCase().trim()){case"weekly":return new Date(r.getTime()+6048e5*t);case"bi-weekly":case"biweekly":case"bi_weekly":return new Date(r.getTime()+12096e5*t);default:let s=new Date(r);return s.setMonth(s.getMonth()+t),s}}static getLastExpectedPaymentDates(e,t,a=12){let r=[],s=new Date,n=0,i=this.getExpectedPaymentDate(e,n,t);for(;i<=s&&n<2*a;)n++,i=this.getExpectedPaymentDate(e,n,t);for(let s=Math.max(0,n-a);s<n;s++)r.push(this.getExpectedPaymentDate(e,s,t));return r}static calculateLateFeesForPeriod(e,t,a,r){let s=this.getLateFeeAmount(a),n=new Date(e);n.setDate(n.getDate()-2);let i=new Date(e);i.setDate(i.getDate()+5);let l=t.filter(e=>{let t=new Date(e.date);return t>=n&&t<=i&&"completed"===e.status}),o=l.reduce((e,t)=>e+t.amount,0),c=Math.max(0,r-o),p=l.length>0?new Date(Math.max(...l.map(e=>new Date(e.date).getTime()))):null;return!p||p>i?{isLate:!0,daysLate:Math.max(0,p?this.daysBetween(i,p):this.daysBetween(i,new Date)),lateFees:c>0?s:0,totalPaid:o,outstanding:c}:{isLate:!1,daysLate:0,lateFees:0,totalPaid:o,outstanding:c}}static calculateTotalLatePayments(e,t){if(!e.leases||0===e.leases.length)return{totalLateFees:0,totalOutstanding:0,totalDue:0,latePeriods:0,payPeriods:[]};let a=e.leases[0];if(!a.lease_start_date||!a.rent)return{totalLateFees:0,totalOutstanding:0,totalDue:0,latePeriods:0,payPeriods:[]};let r=a.rent_cadence||"monthly",s=a.rent,n=this.getLastExpectedPaymentDates(a.lease_start_date,r,12),i=0,l=0,o=0,c=n.map(t=>{let a=this.calculateLateFeesForPeriod(t,e.payment_history||[],r,s);return a.isLate&&(i+=a.lateFees,l+=a.outstanding,o++),{expectedDate:t,...a}});return{totalLateFees:i,totalOutstanding:l,totalDue:i+l,latePeriods:o,payPeriods:c}}static isTenantLate(e,t){return this.calculateTotalLatePayments(e,t).totalDue>0}static async createByPropertyAddress(e){try{let t=(0,r.getSupabaseClient)(),{data:a,error:s}=await t.from("RENT_properties").select("id, monthly_rent").ilike("address",`%${e.property_address}%`).single();if(s)return(0,r.createApiResponse)(null,`Property not found with address: ${e.property_address}`);let{property_address:n,...i}=e,l={...i,property_id:a.id,monthly_rent:e.monthly_rent||a.monthly_rent},{data:o,error:c}=await t.from("RENT_tenants").insert([l]).select("*, RENT_properties(name, address)").single();if(c)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(c));return(0,r.createApiResponse)(o)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async bulkCreateByPropertyAddress(e){try{(0,r.getSupabaseClient)();let t=[],a=[];for(let r of e)try{let e=await this.createByPropertyAddress(r);e.success&&e.data?t.push(e.data):a.push(`Failed to create tenant ${r.first_name} ${r.last_name}: ${e.error}`)}catch(e){a.push(`Error creating tenant ${r.first_name} ${r.last_name}: ${e}`)}return(0,r.createApiResponse)({created:t,errors:a})}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}}t.TenantsService=s},3235:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionsService=void 0;let r=a(2049);class s{static async getAll(e){try{let t=(0,r.getSupabaseClient)().from("RENT_transactions").select("*").order("transaction_date",{ascending:!1});e?.transaction_type&&(t=t.eq("transaction_type",e.transaction_type)),e?.tenant_id&&(t=t.eq("tenant_id",e.tenant_id)),e?.property_id&&(t=t.eq("property_id",e.property_id)),e?.payment_status&&(t=t.eq("payment_status",e.payment_status)),e?.start_date&&(t=t.gte("transaction_date",e.start_date)),e?.end_date&&(t=t.lte("transaction_date",e.end_date));let{data:a,error:s}=await t;if(s)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));return(0,r.createApiResponse)(a)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getById(e){try{let t=(0,r.getSupabaseClient)(),{data:a,error:s}=await t.from("RENT_transactions").select("*").eq("id",e).single();if(s)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));return(0,r.createApiResponse)(a)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async create(e){try{let t=(0,r.getSupabaseClient)(),{data:a,error:s}=await t.from("RENT_transactions").insert([e]).select().single();if(s)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(s));return(0,r.createApiResponse)(a)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async update(e,t){try{let a=(0,r.getSupabaseClient)(),{data:s,error:n}=await a.from("RENT_transactions").update(t).eq("id",e).select().single();if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));return(0,r.createApiResponse)(s)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async delete(e){try{let t=(0,r.getSupabaseClient)(),{error:a}=await t.from("RENT_transactions").delete().eq("id",e);if(a)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(a));return(0,r.createApiResponse)(!0)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getPaginated(e=1,t=10,a){try{let s=(0,r.getSupabaseClient)(),n=(e-1)*t,i=s.from("RENT_transactions").select("*",{count:"exact"}).order("transaction_date",{ascending:!1}).range(n,n+t-1);a?.transaction_type&&(i=i.eq("transaction_type",a.transaction_type)),a?.tenant_id&&(i=i.eq("tenant_id",a.tenant_id)),a?.property_id&&(i=i.eq("property_id",a.property_id)),a?.payment_status&&(i=i.eq("payment_status",a.payment_status)),a?.start_date&&(i=i.gte("transaction_date",a.start_date)),a?.end_date&&(i=i.lte("transaction_date",a.end_date));let{data:l,error:o,count:c}=await i;if(o)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(o));let p=c||0;return(0,r.createApiResponse)({data:l,total:p,page:e,limit:t,hasMore:n+t<p})}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getRentPayments(e){return this.getAll({transaction_type:"rent_payment",...e})}static async getLoanPayments(e){return this.getAll({transaction_type:"loan_payment",...e})}static async getByDateRange(e,t){return this.getAll({start_date:e,end_date:t})}static async getTotalIncome(e,t){try{let a=(0,r.getSupabaseClient)(),{data:s,error:n}=await a.from("RENT_transactions").select("amount").in("transaction_type",["rent_payment","income","property_sale"]).gte("transaction_date",e).lte("transaction_date",t).eq("payment_status","completed");if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));let i=s?.reduce((e,t)=>e+(t.amount||0),0)||0;return(0,r.createApiResponse)(i)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}static async getTotalExpenses(e,t){try{let a=(0,r.getSupabaseClient)(),{data:s,error:n}=await a.from("RENT_transactions").select("amount").in("transaction_type",["expense","loan_payment","property_purchase"]).gte("transaction_date",e).lte("transaction_date",t).eq("payment_status","completed");if(n)return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(n));let i=s?.reduce((e,t)=>e+(t.amount||0),0)||0;return(0,r.createApiResponse)(i)}catch(e){return(0,r.createApiResponse)(null,(0,r.handleSupabaseError)(e))}}}t.TransactionsService=s},2270:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8702:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7195:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c,metadata:()=>o});var r=a(9013),s=a(8747),n=a.n(s);a(1);let i=(0,a(3189).createProxy)(String.raw`C:\Projects\Rental_App\apps\web\components\Header.tsx#Header`);var l=a(2281);let o={title:"Rental Management App",description:"Comprehensive rental property management system"};function c({children:e}){return r.jsx("html",{lang:"en",children:(0,r.jsxs)("body",{className:n().className,children:[(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(i,{}),r.jsx("main",{className:"container mx-auto px-4 py-8",children:e})]}),r.jsx(l.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#22c55e",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}},1025:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var r=a(9013),s=a(6787);function n(){return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h1",{className:"text-6xl font-bold text-gray-900 mb-4",children:"404"}),r.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Page Not Found"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"The page you're looking for doesn't exist or has been moved."}),r.jsx(s.default,{href:"/",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Go Back Home"})]})})}},1:()=>{}};